

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PMODs and the PModIO overlay &mdash; Python on Zynq (Pynq) v1.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python on Zynq (Pynq) v1.0" href="index.html"/>
        <link rel="next" title="The Audio-Video Overlay" href="5_audio_video_overlay.html"/>
        <link rel="prev" title="Programming Zybo’s onboard peripherals" href="3_2_programming_onboard_peripherals_pp.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Python on Zynq (Pynq)
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1_pynq.html">Pynq Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_getting_started.html">Start here</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_a_jupyter_notebook.html">What is the Jupyter Notebook?</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_b_notebook_basics.html">Notebook Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_c_running_code.html">Running Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_d_markdown_cells.html">Markdown Cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_1_programming_zybo_in_python.html">Zynq A9 programming in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_2_programming_onboard_peripherals_pp.html">Programming Zybo&#8217;s onboard peripherals</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PMODs and the PModIO overlay</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pmods">PMods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pmod-interface">PMod Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#io-processors">IO Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zybo-pmodio-overlay">ZYBO PMODIO Overlay</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-using-the-oled-and-als">Example: Using the OLED and ALS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-other-pmods">Using other PMods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adc">ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dac">DAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pot-digital-potentiometer">POT (Digital Potentiometer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mp2-temperature-sensor">MP2 (Temperature Sensor)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#als-ambient-light-sensor">ALS (Ambient Light Sensor)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-using-the-adc-dac-and-oled">Example: Using the ADC, DAC and OLED</a></li>
<li class="toctree-l2"><a class="reference internal" href="#going-further">Going further</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5_audio_video_overlay.html">The Audio-Video Overlay</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_libraries_and_overlays.html">The <code class="docutils literal"><span class="pre">Pynq</span></code> (Python on Zynq) Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_libraries_and_overlays.html#package-contents">Package contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_libraries_and_overlays.html#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_1_iop_code.html">Creating drivers and writing code for the IOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="7.-Test.html">Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_references.html">Useful Reference Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_faqs.html">Frequently Asked Questions (FAQs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">pynq</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Python on Zynq (Pynq)</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>PMODs and the PModIO overlay</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/4_pmodio_overlay.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: navy;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: darkred;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 11ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansiblack { color: black; }
.ansired { color: darkred; }
.ansigreen { color: darkgreen; }
.ansiyellow { color: #c4a000; }
.ansiblue { color: darkblue; }
.ansipurple { color: darkviolet; }
.ansicyan { color: steelblue; }
/* See https://github.com/jupyter/nbconvert/issues/174 */
.ansigray { color: gray; }  /* nbconvert CSS */
.ansigrey { color: gray; }  /* nbconvert HTML output */

.ansibgblack { background-color: black; }
.ansibgred { background-color: red; }
.ansibggreen { background-color: green; }
.ansibgyellow { background-color: yellow; }
.ansibgblue { background-color: blue; }
.ansibgpurple { background-color: magenta; }
.ansibgcyan { background-color: cyan; }
.ansibggray { background-color: gray; }

.ansibold { font-weight: bold; }
</style>
<div class="section" id="pmods-and-the-pmodio-overlay">
<h1><a class="toc-backref" href="#id3">PMODs and the PModIO overlay</a><a class="headerlink" href="#pmods-and-the-pmodio-overlay" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#pmods-and-the-pmodio-overlay" id="id3">PMODs and the PModIO overlay</a><ul>
<li><a class="reference internal" href="#pmods" id="id4">PMods</a></li>
<li><a class="reference internal" href="#pmod-interface" id="id5">PMod Interface</a></li>
<li><a class="reference internal" href="#io-processors" id="id6">IO Processors</a></li>
<li><a class="reference internal" href="#zybo-pmodio-overlay" id="id7">ZYBO PMODIO Overlay</a></li>
<li><a class="reference internal" href="#example-using-the-oled-and-als" id="id8">Example: Using the OLED and ALS</a></li>
<li><a class="reference internal" href="#using-other-pmods" id="id9">Using other PMods</a></li>
<li><a class="reference internal" href="#example-using-the-adc-dac-and-oled" id="id10">Example: Using the ADC, DAC and OLED</a></li>
<li><a class="reference internal" href="#going-further" id="id11">Going further</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="pmods">
<h2><a class="toc-backref" href="#id4">PMods</a><a class="headerlink" href="#pmods" title="Permalink to this headline">¶</a></h2>
<p>PMods (Peripheral Modules) are <em>Input/Output accessory boards</em> that can be used to extend the functionality of the system. For more details and a list of available PMods refer to the <cite>Digilent website &lt;http://www.digilentinc.com/Products/Catalog.cfm?NavPath=2,401&amp;Cat=9&gt;`_</cite></p>
</div>
<div class="section" id="pmod-interface">
<h2><a class="toc-backref" href="#id5">PMod Interface</a><a class="headerlink" href="#pmod-interface" title="Permalink to this headline">¶</a></h2>
<p>Each <em>PMod connector has 12 pins</em> (2 rows of 6 pins, where each row has VCC, GND and 4 data pins). Note that the data pins are labelled 0-7. (In the Digilent documentation the pins are labelled 1-12 and include the VCC and GND pins, but this should be ignored when programming and <em>0-7 should be used to reference data pins</em> from Python.)</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/pmod_closeup.jpeg"><img alt="_images/pmod_closeup.jpeg" src="_images/pmod_closeup.jpeg" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">PMod Connectors</span></p>
</div>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="_images/pmod_pins.png"><img alt="_images/pmod_pins.png" src="_images/pmod_pins.png" style="width: 200px;" /></a>
<p class="caption"><span class="caption-text">PMod Pins</span></p>
</div>
<p>PMods have <em>different pin configurations</em> depending on the number of data pins required. PMods with only a single row of pins can be plugged into the top row or the bottom row of the PMod connector.</p>
<p>Some PMods use both rows (2x4, 2x6 pins), and in general should be <em>aligned to the left</em> of the connector (to align with VCC and GND).</p>
<a class="reference internal image-reference" href="_images/tmp2_8pin.jpeg"><img alt="_images/tmp2_8pin.jpeg" class="align-center" src="_images/tmp2_8pin.jpeg" style="width: 400px;" /></a>
</div>
<div class="section" id="io-processors">
<h2><a class="toc-backref" href="#id6">IO Processors</a><a class="headerlink" href="#io-processors" title="Permalink to this headline">¶</a></h2>
<p>For <em>overlays</em> to be useful, they <em>must provide sufficient functionality</em>, while also providing <em>flexibility</em> to suit a wide range of applications.
Flexibility in the overlay is provided through <em>IO Processors (IOPs)</em>.
An IO Processor is <em>implemented in the Programmable Logic</em> (PL or FPGA fabric) and consists of a MicroBlaze processor, Memory, IIC, SPI, GPIO, Debug logic and a configurable switch.</p>
<a class="reference internal image-reference" href="_images/iop.png"><img alt="_images/iop.png" class="align-center" src="_images/iop.png" style="width: 400px;" /></a>
<p>The IOP gives flexibility to connect to and control a range of different external accessories without requiring a redesign of the FPGA hardware. The IOP can be used to <em>control a PMod port</em>, or other interface, or to offload applications from the main ARM A9 processors in the Zynq PS.</p>
<p>Each IOP has a <em>dedicated memory block</em> for the MicroBlaze instruction and data memory. This memory block is dual-port, with one port connected to the MicroBlaze, and the other connected to the Zynq A9 processors. This allows the <em>ARM A9 processors to access the MicroBlaze memory</em> and dynamically write a new program to the MicroBlaze instruction area. The <em>data area</em> can be used for <em>communication and data transfer</em> between the A9 processors and the IOP(s).</p>
<p>Currently, one IOP can <em>support one PMod port</em>. Inside the IOP are dedicated interface blocks; IIC, SPI and GPIO (General Purpose Input/Output).  IIC and SPI are specialised interfaces used by many of the available PMods, and GPIO can be used to connect to custom interfaces or used as simple inputs and outputs.
When a PMod or other peripheral is plugged in to a port, the <em>configurable switch</em> allows the PMod signals to be routed internally to the required interface block.</p>
</div>
<div class="section" id="zybo-pmodio-overlay">
<h2><a class="toc-backref" href="#id7">ZYBO PMODIO Overlay</a><a class="headerlink" href="#zybo-pmodio-overlay" title="Permalink to this headline">¶</a></h2>
<p>The ZYBO has <em>6 PMod connectors</em>. Ports 1-4 as indicated below are connected the Zynq PL. XADC is connected to the Xilinx ADC on the Zynq, and JF is connected directly to the Zynq PS. XADC and JF are not supported in this release.</p>
<a class="reference internal image-reference" href="_images/zybopmods.jpeg"><img alt="_images/zybopmods.jpeg" class="align-center" src="_images/zybopmods.jpeg" style="width: 320.0px; height: 479.20000000000005px;" /></a>
<p>The <em>PModIO overlay for the ZYBO contains 4 IOPs</em> each connected to one of the PL PMod ports. This allows control of the PMod from Python, via the IOP.</p>
<a class="reference internal image-reference" href="_images/pmodio_overlay_1.png"><img alt="_images/pmodio_overlay_1.png" class="align-center" src="_images/pmodio_overlay_1.png" style="width: 800px;" /></a>
<p>== Using a PMod
As with any other Python code, to use a PMod from Python, the <em>module</em> must be <em>imported</em> before it can be used. For PMod modules, the <em>port</em> that the PMod is plugged into must also be specified.</p>
</div>
<div class="section" id="example-using-the-oled-and-als">
<h2><a class="toc-backref" href="#id8">Example: Using the OLED and ALS</a><a class="headerlink" href="#example-using-the-oled-and-als" title="Permalink to this headline">¶</a></h2>
<p>Plug the <em>PModOLED</em> into Port 1, and <em>PModALS</em> (Ambient Light Sensor) into the top row of Port 2. (The PModALS can currently only be used in the top row of a port.)</p>
<a class="reference internal image-reference" href="_images/als_oled_Demo.jpeg"><img alt="_images/als_oled_Demo.jpeg" class="align-center" src="_images/als_oled_Demo.jpeg" style="width: 300px;" /></a>
<p>The libraries can be found on the sd card in the pyxi/pmods directory.</p>
<p>At the MicroPython prompt, <em>import the OLED</em> library by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">OLED</span>
</pre></div>
</div>
<p>To <em>instantiate</em> the object, on port 1 type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">oled</span> <span class="o">=</span> <span class="n">OLED</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Try <em>writing a message</em> to the OLED.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">oled</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oled</span><span class="o">.</span><span class="n">clear_screen</span><span class="p">()</span>
</pre></div>
</div>
<p>Import the ALS library, create an instance, and read the value from the sensor</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">ALS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span> <span class="o">=</span> <span class="n">ALS</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go"># get a value from 0-255; 0 Darkest, 255 = Brightest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">read_light</span><span class="p">()</span>
</pre></div>
</div>
<p>Write the value from the ALS to the OLED.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">oled</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Light value : &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">read_light</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="section" id="using-other-pmods">
<h2><a class="toc-backref" href="#id9">Using other PMods</a><a class="headerlink" href="#using-other-pmods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adc">
<h3>ADC<a class="headerlink" href="#adc" title="Permalink to this headline">¶</a></h3>
<p>Align the ADC to the left pins of the port.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">ADC</span>
<span class="n">adc</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c"># Get the raw data</span>
<span class="n">adc</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="c"># Returns a float</span>
<span class="n">adc</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="dac">
<h3>DAC<a class="headerlink" href="#dac" title="Permalink to this headline">¶</a></h3>
<p>The DAC can only be used in the <em>TOP row</em> of a port.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">DAC</span>
<span class="n">dac</span> <span class="o">=</span> <span class="n">DAC</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c"># Write a voltage between 0 and 1.2 V</span>
<span class="n">dac</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pot-digital-potentiometer">
<h3>POT (Digital Potentiometer)<a class="headerlink" href="#pot-digital-potentiometer" title="Permalink to this headline">¶</a></h3>
<p>The DPOT can only be used in the <em>TOP row</em> of a port.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">DPOT</span>
<span class="n">dpot</span> <span class="o">=</span> <span class="n">DPOT</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c"># Set the DPot from 0-255; Wiper voltage = (VCC*Value)/255</span>
<span class="n">dpot</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="c"># Set a delay and step size to generate a Voltage &quot;ramp&quot;</span>
<span class="n">dpot</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">step_size</span><span class="p">,</span><span class="n">delay</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mp2-temperature-sensor">
<h3>MP2 (Temperature Sensor)<a class="headerlink" href="#mp2-temperature-sensor" title="Permalink to this headline">¶</a></h3>
<p>Align the TMP2 to the left pins of a port.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">TMP2</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">TMP2</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c"># Read back the temperature in degrees C</span>
<span class="n">temp</span><span class="o">.</span><span class="n">read_temp</span><span class="p">()</span>
<span class="c"># start logging values at intervals of delay</span>
<span class="n">temp</span><span class="o">.</span><span class="n">start_log</span><span class="p">([</span><span class="n">delay</span><span class="p">])</span>
<span class="n">temp</span><span class="o">.</span><span class="n">stop_log</span><span class="p">()</span>
<span class="n">temp</span><span class="o">.</span><span class="n">print_log</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="als-ambient-light-sensor">
<h3>ALS (Ambient Light Sensor)<a class="headerlink" href="#als-ambient-light-sensor" title="Permalink to this headline">¶</a></h3>
<p>The ALS can only be used in the <em>TOP row</em> of a port.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">ALS</span>
<span class="n">als</span> <span class="o">=</span> <span class="n">ALS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">als</span><span class="o">.</span><span class="n">read_light</span><span class="p">()</span>
<span class="c"># start logging values at intervals of delay</span>
<span class="n">als</span><span class="o">.</span><span class="n">start_log</span><span class="p">([</span><span class="n">delay</span><span class="p">])</span>
<span class="n">als</span><span class="o">.</span><span class="n">stop_log</span><span class="p">()</span>
<span class="n">als</span><span class="o">.</span><span class="n">print_log</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-using-the-adc-dac-and-oled">
<h2><a class="toc-backref" href="#id10">Example: Using the ADC, DAC and OLED</a><a class="headerlink" href="#example-using-the-adc-dac-and-oled" title="Permalink to this headline">¶</a></h2>
<p>This example connects the DAC to the ADC. You will write a value to the DAC which the ADC will measure, and write it to the OLED.</p>
<ol class="arabic simple">
<li>Set the jumper (JP1) on the PModAD2 to <em>Ref</em></li>
<li>Insert the following PMods:</li>
</ol>
<ul class="simple">
<li>DAC to Port 1 (Top Row)</li>
<li>ADC to Port 2 (Align to the left of the port)</li>
<li>OLED to Port 4</li>
</ul>
<ol class="arabic simple" start="3">
<li>Connect a wire from PModA4 <em>Pin A</em> to PModAD2 <em>V1</em></li>
</ol>
<a class="reference internal image-reference" href="_images/adc_dac_demo.jpeg"><img alt="_images/adc_dac_demo.jpeg" class="align-center" src="_images/adc_dac_demo.jpeg" style="width: 400px;" /></a>
<ol class="arabic simple" start="4">
<li>Power on the board, and open a terminal</li>
<li>Load the PMod classes from Python-Xilinx library (pyxi.pmods)</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">OLED</span><span class="p">,</span> <span class="n">ADC</span><span class="p">,</span> <span class="n">DAC</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>instantiate the PMods</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dac</span> <span class="o">=</span> <span class="n">DAC</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">adc</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">oled</span> <span class="o">=</span> <span class="n">OLED</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Set DAC output voltage</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dac</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li>Measure output of DAC with ADC</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">value</span> <span class="o">=</span> <span class="n">adc</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li>Display measured value on OLED</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="n">oled</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="going-further">
<h2><a class="toc-backref" href="#id11">Going further</a><a class="headerlink" href="#going-further" title="Permalink to this headline">¶</a></h2>
<p>There is a DAC_LOOP.py script in the examples directory on the SD card (see below for source code).</p>
<p>The DAC_LOOP.py file contains a function dac_loop(). Load the file by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">execfile</span><span class="p">(</span><span class="s">&quot;pyxi/examples/DAC_LOOP.py&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, this uses the previous configuration (<em>DAC</em> connected to <em>Port 1</em> (Top Row), <em>ADC</em> connected to <em>Port 2</em>, <em>OLED</em> connected to <em>Port 4</em> and a wire connecting the DAC to the ADC). The function reads <em>Switch 4</em>, and if the switch is on, it will run a loop that writes to the DAC, reads the value on the ADC and writes to the OLED. This is the same as the previous example, but this time executing from a script, and inside a loop controlled by a switch.</p>
<p>Set <em>Switch 4</em>, and then run the function by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dac_loop</span><span class="p">()</span>
</pre></div>
</div>
<p>To exit the function, turn off Switch 4.</p>
<p>The function can also be called with the following parameters to change the configuration</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dac_loop</span><span class="p">(</span><span class="n">dac_port</span><span class="p">,</span> <span class="n">adc_port</span><span class="p">,</span> <span class="n">oled_port</span><span class="p">,</span> <span class="n">switch_number</span><span class="p">,</span>
<span class="n">delay_seconds_between_iterations</span><span class="p">)</span>
</pre></div>
</div>
<p><em>DAC_LOOP.py</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">dac_loop</span><span class="p">(</span><span class="n">DAC_Port</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ADC_Port</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">OLED_Port</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
             <span class="n">Switch_nmbr</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">delay_secs</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">   DAC -&gt; ADC -&gt; OLED -- LOOP OVER 10 Values</span>
<span class="sd">&#39;&#39;&#39;</span>
    <span class="c"># Import PMOD classes from library PythonXilinx (pyxi.pmods)</span>
      <span class="kn">from</span> <span class="nn">pyxi.pmods</span> <span class="kn">import</span> <span class="n">OLED</span><span class="p">,</span> <span class="n">ADC</span><span class="p">,</span> <span class="n">DAC</span>

    <span class="kn">from</span> <span class="nn">pyxi.board</span> <span class="kn">import</span>  <span class="n">LED</span><span class="p">,</span> <span class="n">Switch</span>
    <span class="kn">from</span> <span class="nn">pyxi.board.utils</span> <span class="kn">import</span> <span class="n">delay</span>

    <span class="c"># Match PMOD instances to PMOD Connectors</span>

    <span class="c"># Instantiate OLED</span>
    <span class="n">oled</span> <span class="o">=</span> <span class="n">OLED</span><span class="p">(</span><span class="n">OLED_Port</span><span class="p">)</span>

    <span class="c"># Instantiate Digital to Analog Converter</span>
    <span class="n">dac</span> <span class="o">=</span> <span class="n">DAC</span><span class="p">(</span><span class="n">DAC_Port</span><span class="p">)</span>

    <span class="c"># Instantiate Analog to Digital Converter</span>
    <span class="n">adc</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="n">ADC_Port</span><span class="p">)</span>

    <span class="n">LED</span><span class="p">(</span><span class="n">Switch_nmbr</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">Switch</span><span class="p">(</span><span class="n">Switch_nmbr</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
        <span class="n">LED</span><span class="p">(</span><span class="n">Switch_nmbr</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
            <span class="n">dac</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">measured</span> <span class="o">=</span> <span class="n">adc</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">delay</span><span class="p">(</span><span class="n">delay_secs</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Measurement {} equals: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">measured</span><span class="p">))</span>
            <span class="n">oled</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">measured</span><span class="p">)</span>
    <span class="n">LED</span><span class="p">(</span><span class="n">Switch_nmbr</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="5_audio_video_overlay.html" class="btn btn-neutral float-right" title="The Audio-Video Overlay" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3_2_programming_onboard_peripherals_pp.html" class="btn btn-neutral" title="Programming Zybo’s onboard peripherals" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Xilinx.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>